# PhoneRecords 通话录音

## 各文件简介
### CallReceiver（广播接收者）
接受的广播如下

	呼入电话时发送的广播
	呼出电话时发送的广播
	挂断电话时发送的广播
调用TelephonyManager进行更细致的录音节点的选择。
**此处存在可优化项：使呼出电话的录音开始节点更加精准**

获取相应信息，将信息传递给录音服务

	电话号码（调用ContactsNameDao查看联系人姓名）
	来电时间（注意将时间本地化）
	来电模式（呼入电话、呼出电话）

### RecorderService（服务）
在onCreate方法中启动录音
在onDestory方法中结束录音
### ManageRecordsActivity（活动）
负责录音文件的管理：

	录音文件信息的显示、打开，删除等操作
可在此页添加设置页面的跳转入口，

	负责录音文件保存路径、录音模式的选择等（未完成）
### ContactsNameDao（内容提供者）
在联系人的数据库中，查找电话号码。
若联系人存在，则返回联系人姓名。
若联系人不存在，则返回原电话号码

### PhoneRecordsInfo
录音文件信息的JAVABEAN，用来提供给ListView
包含的信息有

	联系人姓名（或电话号码）
	通话时间
	录音时长
	电话类型

### PhoneRecordsInfoProvider（耗时操作，子线程运行）
获取所有录音信息的List集合，
将集合中的项按照通话时间排序并返回，
**（此处可以优化，在设置页面中添加按照不同的属性排序的功能）**
并将其提供给ManageRecordsActivity使用



## 暂未完成
1. 进程的存活问题，考虑使用前台服务
2. 添加设置界面，选择声音源，选择文件保存位置
3. 考虑在管理界面自动删除时长小于1秒的文件

##遇到的问题
1. 安卓4.4无法向SD卡中写入文件的问题。
   暂时4.4系统无法正常运行
2. 录音API的音源选择，华为荣耀4a不支持MIC；
   安卓4.1的模拟器不支持双向录音。
   涉及到各机型的适配问题
